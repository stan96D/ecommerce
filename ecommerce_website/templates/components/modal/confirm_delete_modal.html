<!-- HTML Structure for the Confirm Delete Modal -->
<div class="relative z-10 hidden" id="confirmDeleteModal" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <!-- Background backdrop -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

    <!-- Modal content -->
    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <div
                class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6">
                <div class="sm:flex sm:items-start">
                    <div
                        class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                        <svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                        </svg>
                    </div>
                    <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                        <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">{{modal.header}}
                        </h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-500" id="modal-message">{{modal.description}}</p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                    <button type="button" id="confirmButton"
                        class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto">{{modal.action_button}}</button>
                    <button type="button" id="cancelButton"
                        class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">{{modal.cancel_button}}</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Include modalFunctions.js -->
<script src="modalFunctions.js"></script>

<script>
    // Function to show the confirm delete modal dynamically
    function showConfirmDeleteModal(message, confirmButtonText, cancelButtonText) {
        const modal = document.getElementById('confirmDeleteModal');
        const modalMessage = document.getElementById('modal-message');
        const confirmButton = document.getElementById('confirmButton');
        const cancelButton = document.getElementById('cancelButton');

        // Set modal message
        modalMessage.textContent = message;

        // Set button labels
        confirmButton.textContent = confirmButtonText;
        cancelButton.textContent = cancelButtonText;

        // Add event listeners to buttons
        confirmButton.addEventListener('click', function () {
            closeModal(modal);
            handleConfirmAction(); // Call the generic confirm action
        });

        cancelButton.addEventListener('click', function () {
            closeModal(modal);
            handleCancelAction(); // Call the generic cancel action
        });

        // Show the modal
        modal.classList.remove('hidden');
    }

    // Function to close the modal
    function closeModal(modal) {
        modal.classList.add('hidden');
    }

    // Example usage:
    const deleteAccountButton = document.getElementById('delete-account-button');
    deleteAccountButton.addEventListener('click', function () {
        // Show confirm delete modal with custom message
        showConfirmDeleteModal(
            'Are you sure you want to deactivate your account? All of your data will be permanently removed from our servers forever.',
            'Deactivate', 'Cancel'
        );
    });
</script>